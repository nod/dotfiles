#!/bin/sh

# enable or disable a localhost socks proxy via cmdline
# this expects a proxy to be running on localhost:port
# usually setup via   ssh -Dport some.host

state=$1

valid_states="on off"

if ! [[ $valid_states =~ $state ]]
then
	echo "usage: $0 on|off"
	exit
fi

INTERFACE="Wi-Fi"

sudo networksetup -setsocksfirewallproxy $INTERFACE localhost 6480
sudo networksetup -setsocksfirewallproxystate $INTERFACE $state

